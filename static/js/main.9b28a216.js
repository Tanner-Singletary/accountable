(()=>{"use strict";var e={5678:(e,t,r)=>{r.r(t),r.d(t,{default:()=>W});var n=r(885),a=r(3426),o=r(6792),i=r(9385),l=(r(5682),r(5004)),s=r(519),u=(0,r(1218).createClient)("https://bxfruloupumcvynxnqnt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ4ZnJ1bG91cHVtY3Z5bnhucW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTgwMTUyNzIsImV4cCI6MjAxMzU5MTI3Mn0.m6EPHp4wxq7GdWTJjjrdDQaD8uH2oWRWr1Sas4cwq1k",{auth:{storage:s.default,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1}}),c=r(5861),d=r(3624),f=r(5898),h=r(2629);function p(){var e=(0,l.useState)(""),t=(0,n.default)(e,2),r=t[0],a=t[1],o=(0,l.useState)(""),s=(0,n.default)(o,2),p=s[0],y=s[1],x=(0,l.useState)(!1),g=(0,n.default)(x,2),v=g[0],j=g[1];function b(){return(b=(0,c.default)((function*(){j(!0);var e=(yield u.auth.signInWithPassword({email:r,password:p})).error;e&&d.default.alert(e.message),j(!1)}))).apply(this,arguments)}function S(){return(S=(0,c.default)((function*(){j(!0);var e=(yield u.auth.signUp({email:r,password:p})).error;e&&d.default.alert(e.message),j(!1)}))).apply(this,arguments)}return(0,h.jsxs)(i.default,{style:m.container,children:[(0,h.jsx)(i.default,{style:[m.verticallySpaced,m.mt20],children:(0,h.jsx)(f.Input,{label:"Email",leftIcon:{type:"font-awesome",name:"envelope"},onChangeText:function(e){return a(e)},value:r,placeholder:"email@address.com",autoCapitalize:"none"})}),(0,h.jsx)(i.default,{style:m.verticallySpaced,children:(0,h.jsx)(f.Input,{label:"Password",leftIcon:{type:"font-awesome",name:"lock"},onChangeText:function(e){return y(e)},value:p,secureTextEntry:!0,placeholder:"Password",autoCapitalize:"none"})}),(0,h.jsx)(i.default,{style:[m.verticallySpaced,m.mt20],children:(0,h.jsx)(f.Button,{title:"Sign in",disabled:v,onPress:function(){return function(){return b.apply(this,arguments)}()}})}),(0,h.jsx)(i.default,{style:m.verticallySpaced,children:(0,h.jsx)(f.Button,{title:"Sign up",disabled:v,onPress:function(){return function(){return S.apply(this,arguments)}()}})})]})}var m=o.default.create({container:{marginTop:40,padding:12},verticallySpaced:{paddingTop:4,paddingBottom:4,alignSelf:"stretch"},mt20:{marginTop:20}}),y=r(1054),x=r(3693),g=r(3645),v="#202121",j="#EDB9A8",b="#FF5733",S="#BDEDA8",w="#53C623";function P(e){var t=(0,l.useState)(!1),r=(0,n.default)(t,2),a=r[0],o=r[1],s=(0,l.useState)(0),u=(0,n.default)(s,2),c=u[0],d=u[1];return(0,h.jsxs)(i.default,{style:{backgroundColor:a?e.colorHex:e.initialColorHex},children:[(0,h.jsx)(x.default,{title:e.metric,onPress:function(){return function(){o(!0),d(c+1);var t=e.colorHex===b?-1:1;e.updateTodayScore(t)}()}}),(0,h.jsx)(y.default,{children:c})]})}function C(e){var t=e.colorHex===b?"Don't":"Do";return(0,h.jsxs)(i.default,{children:[(0,h.jsx)(y.default,{style:{fontSize:18,fontWeight:"bold"},children:t}),(0,h.jsx)(g.default,{style:{backgroundColor:e.initialColorHex},data:e.metrics,renderItem:function(t){var r=t.item;return(0,h.jsx)(P,{metric:r.name,initialColorHex:e.initialColorHex,colorHex:e.colorHex,updateTodayScore:e.updateTodayScore})}})]})}function T(e){return(0,h.jsxs)(i.default,{style:{flex:5,alignItems:"center"},children:[(0,h.jsxs)(y.default,{children:["Today's Score: ",e.todayScore]}),(0,h.jsx)(y.default,{children:"\n"}),e.metrics.length>0?(0,h.jsxs)(i.default,{style:{flexDirection:"row"},children:[(0,h.jsx)(C,{initialColorHex:S,colorHex:w,metrics:e.metrics.filter((function(e){return"positive"===e.category})),updateTodayScore:e.updateTodayScore}),(0,h.jsx)(C,{initialColorHex:j,colorHex:b,metrics:e.metrics.filter((function(e){return"negative"===e.category})),updateTodayScore:e.updateTodayScore})]}):(0,h.jsx)(y.default,{style:{fontSize:20},children:"Click 'Add Metrics' below to get started! "}),(0,h.jsx)(y.default,{children:"\n"}),(0,h.jsx)(y.default,{children:"\n"}),(0,h.jsx)(y.default,{children:"\n"})]})}var I=r(6591);function O(e){var t=e.session,r=(0,l.useState)(!1),a=(0,n.default)(r,2),o=a[0],s=a[1],f=(0,l.useState)("New positive metric"),p=(0,n.default)(f,2),m=p[0],g=p[1],v=(0,l.useState)(""),j=(0,n.default)(v,2),b=j[0],S=j[1],w=(0,l.useState)("New negative metric"),P=(0,n.default)(w,2),C=P[0],T=P[1],O=(0,l.useState)(""),k=(0,n.default)(O,2),A=k[0],F=k[1];function H(e,t){return E.apply(this,arguments)}function E(){return(E=(0,c.default)((function*(e,r){try{console.log("async insertMetric called with:"),console.log({name:e,category:r}),s(!0);var n={user:t.user.id,name:e,category:r},a=(yield u.from("metrics").insert(n)).error;if(a)throw a}catch(a){a instanceof Error&&d.default.alert(a.message)}finally{s(!1)}}))).apply(this,arguments)}return(0,h.jsxs)(i.default,{children:[(0,h.jsx)(I.default,{style:_.input,onChangeText:g,value:m}),(0,h.jsx)(x.default,{title:"Add positive metric",onPress:function(){return function(e){S(e),H(e,"positive")}(m)},disabled:o}),(0,h.jsx)(y.default,{children:b?`added ${b}!`:""}),(0,h.jsx)(y.default,{children:"\n\n"}),(0,h.jsx)(I.default,{style:_.input,onChangeText:T,value:C}),(0,h.jsx)(x.default,{title:"Add negative metric",onPress:function(){return function(e){F(e),H(e,"negative")}(C)},disabled:o}),(0,h.jsx)(y.default,{children:A?`added ${A}!`:""}),(0,h.jsx)(y.default,{children:"\n\n"})]})}var _=o.default.create({input:{height:40,margin:12,borderWidth:1,padding:10}}),k=r(2982),A=r(5087);const F="web"===r(2152).default.OS?function(e,t,r,n){if(window.confirm([e,t].filter(Boolean).join("\n"))){var a=r.find((function(e){return"cancel"!==e.style}));a&&a.onPress()}else{var o=r.find((function(e){return"cancel"===e.style}));o&&o.onPress()}}:d.default.alert;function H(e){var t=(0,l.useState)(e.metrics),r=(0,n.default)(t,2),a=r[0],o=r[1],s=(0,l.useState)(!0),d=(0,n.default)(s,2),f=d[0],p=d[1];function m(){return(m=(0,c.default)((function*(){var t=a.filter((function(e){return!0===e.staged_to_delete})).map((function(e){return e.name}));(yield u.from("metrics").delete().eq("user",e.session.user.id).in("name",t)).error;F("Deletion submitted, return to home page to see remaining metrics."),e.setActivePage("home")}))).apply(this,arguments)}return(0,h.jsxs)(i.default,{children:[(0,h.jsx)(y.default,{style:{fontSize:18,fontWeight:"bold"},children:"Delete Metrics"}),(0,h.jsx)(g.default,{data:a,renderItem:function(e){var t=e.item;return(0,h.jsxs)(i.default,{style:{flexDirection:"row"},children:[(0,h.jsx)(A.default,{trackColor:{false:"#767577",true:"#81b0ff"},thumbColor:t.a?"#f5dd4b":"#f4f3f4",ios_backgroundColor:"#3e3e3e",onValueChange:function(){return function(e){var t=(0,k.default)(a);for(var r of t)r.name===e.name&&(r.staged_to_delete=!r.staged_to_delete);p(t.filter((function(e){return!0===e.staged_to_delete})).length<=0),o(t)}(t)},value:t.staged_to_delete}),(0,h.jsx)(y.default,{children:t.name})]})}}),(0,h.jsx)(x.default,{title:"Delete",onPress:function(){return F("Delete all selected?","Press OK to permanently delete metrics.",[{text:"Cancel",onPress:function(){return console.log("Cancel Pressed")},style:"cancel"},{text:"OK",onPress:function(){return function(){return m.apply(this,arguments)}()}}])},disabled:f})]})}function E(e){var t=(0,h.jsx)(h.Fragment,{}),r=e.metrics;switch(r.forEach((function(e){return e.staged_to_delete=!1})),e.activePage){case"home":t=(0,h.jsx)(T,{todayScore:e.todayScore,updateTodayScore:e.updateTodayScore,metrics:e.metrics});break;case"add_metrics":t=(0,h.jsx)(O,{session:e.session});break;case"delete_metrics":t=(0,h.jsx)(H,{session:e.session,metrics:r,setActivePage:e.setActivePage})}return(0,h.jsxs)(i.default,{style:{flex:5,alignItems:"center"},children:[t,(0,h.jsx)(x.default,{title:"Home",onPress:function(){return e.setActivePage("home")}}),(0,h.jsx)(x.default,{title:"Add Metrics",onPress:function(){return e.setActivePage("add_metrics")}}),(0,h.jsx)(x.default,{title:"Delete Metrics",onPress:function(){return e.setActivePage("delete_metrics")}})]})}function M(e){var t=e.session,r=(0,l.useState)(0),a=(0,n.default)(r,2),o=a[0],i=a[1],s=(0,l.useState)("home"),d=(0,n.default)(s,2),f=d[0],p=d[1],m=(0,l.useState)(!1),x=(0,n.default)(m,2),g=x[0],v=x[1],j=(0,l.useState)([]),b=(0,n.default)(j,2),S=b[0],w=b[1];function P(){return(P=(0,c.default)((function*(){try{v(!0);var e=yield u.from("metrics").select("name,category").eq("user",t.user.id),r=e.data,n=e.error,a=e.status;if(n&&406!==a)throw n;r&&w(r)}catch(n){n instanceof Error&&Alert.alert(n.message)}finally{v(!1)}}))).apply(this,arguments)}return(0,l.useEffect)((function(){!function(){P.apply(this,arguments)}()}),[f]),g?(0,h.jsx)(y.default,{children:"Loading..."}):(0,h.jsx)(E,{todayScore:o,updateTodayScore:function(e){i(o+e)},activePage:f,setActivePage:p,metrics:S,session:t})}var D=o.default.create({title:{fontSize:20,fontWeight:"bold"},text:{color:v},input:{height:40,borderWidth:1,padding:10,color:v,backgroundColor:"#FFFFFFFF",borderBottomColor:"#E6EAEA",borderBottomWidth:1},warning:{color:"red"},success:{color:"green"}});function z(){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(y.default,{style:D.title,children:["Accountable","\n","\n"]}),(0,h.jsxs)(y.default,{style:{fontSize:18},children:["The actions you take create the person you're becoming.","\n","\n"]})]})}function W(){var e=(0,l.useState)(null),t=(0,n.default)(e,2),r=t[0],o=t[1];return(0,l.useEffect)((function(){u.auth.getSession().then((function(e){var t=e.data.session;o(t)})),u.auth.onAuthStateChange((function(e,t){o(t)}))}),[]),(0,h.jsxs)(i.default,{style:J.container,children:[(0,h.jsx)(z,{}),r&&r.user?(0,h.jsx)(M,{session:r},r.user.id):(0,h.jsx)(p,{}),(0,h.jsx)(a.default,{style:"auto"})]})}var J=o.default.create({container:{padding:30,flex:1,backgroundColor:"#F6F6F6",alignItems:"center",justifyContent:"center"}})}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=e,(()=>{var e=[];r.O=(t,n,a,o)=>{if(!n){var i=1/0;for(c=0;c<e.length;c++){for(var[n,a,o]=e[c],l=!0,s=0;s<n.length;s++)(!1&o||i>=o)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(l=!1,o<i&&(i=o));if(l){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,a,o]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var o=Object.create(null);r.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&a&&n;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,r.d(o,i),o}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.p="/accountable/",(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,o,[i,l,s]=n,u=0;if(i.some((t=>0!==e[t]))){for(a in l)r.o(l,a)&&(r.m[a]=l[a]);if(s)var c=s(r)}for(t&&t(n);u<i.length;u++)o=i[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(c)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r.O(void 0,[890],(()=>r(6271)));n=r.O(n)})();
//# sourceMappingURL=main.9b28a216.js.map