(()=>{"use strict";var e={8097:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var r=n(885),o=n(3426),a=n(6792),s=n(9385),i=(n(5682),n(5004)),l=n(519),u=(0,n(1218).createClient)("https://bxfruloupumcvynxnqnt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ4ZnJ1bG91cHVtY3Z5bnhucW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTgwMTUyNzIsImV4cCI6MjAxMzU5MTI3Mn0.m6EPHp4wxq7GdWTJjjrdDQaD8uH2oWRWr1Sas4cwq1k",{auth:{storage:l.default,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1}}),c=n(5861),d=n(3624),f=n(5898),y=n(2629);function p(){var e=(0,i.useState)(""),t=(0,r.default)(e,2),n=t[0],o=t[1],a=(0,i.useState)(""),l=(0,r.default)(a,2),p=l[0],m=l[1],g=(0,i.useState)(!1),x=(0,r.default)(g,2),v=x[0],j=x[1];function b(){return(b=(0,c.default)((function*(){j(!0);var e=(yield u.auth.signInWithPassword({email:n,password:p})).error;e&&d.default.alert(e.message),j(!1)}))).apply(this,arguments)}function S(){return(S=(0,c.default)((function*(){j(!0);var e=(yield u.auth.signUp({email:n,password:p})).error;e&&d.default.alert(e.message),j(!1)}))).apply(this,arguments)}return(0,y.jsxs)(s.default,{style:h.container,children:[(0,y.jsx)(s.default,{style:[h.verticallySpaced,h.mt20],children:(0,y.jsx)(f.Input,{label:"Email",leftIcon:{type:"font-awesome",name:"envelope"},onChangeText:function(e){return o(e)},value:n,placeholder:"email@address.com",autoCapitalize:"none"})}),(0,y.jsx)(s.default,{style:h.verticallySpaced,children:(0,y.jsx)(f.Input,{label:"Password",leftIcon:{type:"font-awesome",name:"lock"},onChangeText:function(e){return m(e)},value:p,secureTextEntry:!0,placeholder:"Password",autoCapitalize:"none"})}),(0,y.jsx)(s.default,{style:[h.verticallySpaced,h.mt20],children:(0,y.jsx)(f.Button,{title:"Sign in",disabled:v,onPress:function(){return function(){return b.apply(this,arguments)}()}})}),(0,y.jsx)(s.default,{style:h.verticallySpaced,children:(0,y.jsx)(f.Button,{title:"Sign up",disabled:v,onPress:function(){return function(){return S.apply(this,arguments)}()}})})]})}var h=a.default.create({container:{marginTop:40,padding:12},verticallySpaced:{paddingTop:4,paddingBottom:4,alignSelf:"stretch"},mt20:{marginTop:20}}),m=n(1054),g=n(3693),x=n(3645),v={colors:{background:"#F6F6F6",foreground:"#202121",primary:"#FFFFFFFF",veryGood:"#53C623",good:"#BDEDA8",veryBad:"#FF5733",bad:"#EDB9A8"},spacing:{s:8,m:16,l:24},textVariants:{header:{fontSize:36,fontWeight:"bold"},body:{fontSize:16}}};const j="web"===n(2152).default.OS?function(e,t,n,r){if(window.confirm([e,t].filter(Boolean).join("\n"))){var o=n.find((function(e){return"cancel"!==e.style}));o&&o.onPress()}else{var a=n.find((function(e){return"cancel"===e.style}));a&&a.onPress()}}:d.default.alert;function b(e){var t=(0,i.useState)(!1),n=(0,r.default)(t,2),o=n[0],a=n[1],l=(0,i.useState)(!1),d=(0,r.default)(l,2),f=d[0],p=d[1],h=(0,i.useState)(0),x=(0,r.default)(h,2),b=x[0],S=x[1];function C(){return(C=(0,c.default)((function*(){console.log("async logMetricClick called for metric:"),p(!0),S(b+1);var t=e.colorHex===v.colors.veryBad?-1:1;e.updateTodayScore(t);try{console.log(e.metric),a(!0);var n={user_id:e.session.user.id,metric_id:e.metric.id},r=(yield u.from("metric_logs").insert(n)).error;if(r)throw r}catch(r){r instanceof Error&&j(r.message)}finally{a(!1)}}))).apply(this,arguments)}return(0,y.jsxs)(s.default,{style:{flex:1,alignItems:"center",justifyContent:"center",margin:10,backgroundColor:f?e.colorHex:e.initialColorHex,borderColor:"black",borderWidth:1},children:[(0,y.jsx)(g.default,{title:e.metric.name,onPress:function(){return function(){return C.apply(this,arguments)}()},disabled:o}),(0,y.jsx)(m.default,{children:b})]})}function S(e){var t=e.colorHex===v.colors.veryBad?"Don't":"Do";return(0,y.jsxs)(s.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:[(0,y.jsx)(m.default,{style:{fontSize:18,fontWeight:"bold"},children:t}),(0,y.jsx)(x.default,{style:{backgroundColor:e.initialColorHex},data:e.metrics,renderItem:function(t){var n=t.item;return(0,y.jsx)(b,{metric:n,initialColorHex:e.initialColorHex,colorHex:e.colorHex,updateTodayScore:e.updateTodayScore,session:e.session})}})]})}function C(e){return(0,y.jsxs)(s.default,{style:{flex:1,marginTop:10,alignItems:"center",justifyContent:"center"},children:[(0,y.jsxs)(m.default,{children:["Today's Score: ",e.todayScore]}),e.metrics.length>0?(0,y.jsxs)(s.default,{style:{flex:1,flexDirection:"row",padding:10,alignItems:"center",justifyContent:"center"},children:[(0,y.jsx)(S,{initialColorHex:v.colors.good,colorHex:v.colors.veryGood,metrics:e.metrics.filter((function(e){return"positive"===e.category})),updateTodayScore:e.updateTodayScore,session:e.session}),(0,y.jsx)(S,{initialColorHex:v.colors.bad,colorHex:v.colors.veryBad,metrics:e.metrics.filter((function(e){return"negative"===e.category})),updateTodayScore:e.updateTodayScore,session:e.session})]}):(0,y.jsx)(m.default,{style:{fontSize:20},children:"Click 'Add Metrics' below to get started! "}),(0,y.jsx)(m.default,{children:"\n"})]})}var w=n(6591);function P(e){var t=e.session,n=(0,i.useState)(!1),o=(0,r.default)(n,2),a=o[0],l=o[1],d=(0,i.useState)("New positive metric"),f=(0,r.default)(d,2),p=f[0],h=f[1],x=(0,i.useState)(""),v=(0,r.default)(x,2),b=v[0],S=v[1],C=(0,i.useState)("New negative metric"),P=(0,r.default)(C,2),T=P[0],_=P[1],O=(0,i.useState)(""),k=(0,r.default)(O,2),F=k[0],H=k[1];function A(e,t){return M.apply(this,arguments)}function M(){return(M=(0,c.default)((function*(e,n){try{console.log("async insertMetric called with:"),console.log({name:e,category:n}),l(!0);var r={user:t.user.id,name:e,category:n},o=(yield u.from("metrics").insert(r)).error;if(o)throw o}catch(o){o instanceof Error&&j(o.message)}finally{l(!1)}}))).apply(this,arguments)}return(0,y.jsxs)(s.default,{children:[(0,y.jsx)(w.default,{style:I.input,onChangeText:h,value:p}),(0,y.jsx)(g.default,{title:"Add positive metric",onPress:function(){return function(e){S(e),A(e,"positive")}(p)},disabled:a}),(0,y.jsx)(m.default,{children:b?`added ${b}!`:""}),(0,y.jsx)(m.default,{children:"\n\n"}),(0,y.jsx)(w.default,{style:I.input,onChangeText:_,value:T}),(0,y.jsx)(g.default,{title:"Add negative metric",onPress:function(){return function(e){H(e),A(e,"negative")}(T)},disabled:a}),(0,y.jsx)(m.default,{children:F?`added ${F}!`:""}),(0,y.jsx)(m.default,{children:"\n\n"})]})}var I=a.default.create({input:{height:40,margin:12,borderWidth:1,padding:10}}),T=n(2982),_=n(5087);function O(e){var t=(0,i.useState)(e.metrics),n=(0,r.default)(t,2),o=n[0],a=n[1],l=(0,i.useState)(!0),d=(0,r.default)(l,2),f=d[0],p=d[1];function h(){return(h=(0,c.default)((function*(){var t=o.filter((function(e){return!0===e.staged_to_delete})).map((function(e){return e.name}));(yield u.from("metrics").delete().eq("user",e.session.user.id).in("name",t)).error;j("Deletion submitted, return to home page to see remaining metrics."),e.setActivePage("home")}))).apply(this,arguments)}return(0,y.jsxs)(s.default,{style:{flex:1,padding:20,justifyContent:"center",alignItems:"center"},children:[(0,y.jsx)(m.default,{style:{fontSize:18,fontWeight:"bold"},children:"Delete Metrics"}),(0,y.jsx)(m.default,{children:"\n"}),(0,y.jsx)(x.default,{data:o,renderItem:function(e){var t=e.item;return(0,y.jsxs)(s.default,{style:{flex:1,flexDirection:"row",padding:10},children:[(0,y.jsx)(_.default,{trackColor:{false:"#767577",true:"#81b0ff"},thumbColor:t.a?"#f5dd4b":"#f4f3f4",ios_backgroundColor:"#3e3e3e",onValueChange:function(){return function(e){var t=(0,T.default)(o);for(var n of t)n.name===e.name&&(n.staged_to_delete=!n.staged_to_delete);p(t.filter((function(e){return!0===e.staged_to_delete})).length<=0),a(t)}(t)},value:t.staged_to_delete}),(0,y.jsx)(m.default,{style:{padding:10},children:t.name})]})}}),(0,y.jsx)(g.default,{title:"Delete",onPress:function(){return j("Delete all selected?","Press OK to permanently delete metrics.",[{text:"Cancel",onPress:function(){return console.log("Cancel Pressed")},style:"cancel"},{text:"OK",onPress:function(){return function(){return h.apply(this,arguments)}()}}])},disabled:f})]})}function k(e){var t=(0,y.jsx)(y.Fragment,{}),n=e.metrics;switch(n.forEach((function(e){return e.staged_to_delete=!1})),e.activePage){case"home":t=(0,y.jsx)(C,{todayScore:e.todayScore,updateTodayScore:e.updateTodayScore,metrics:e.metrics,session:e.session});break;case"add_metrics":t=(0,y.jsx)(P,{session:e.session});break;case"delete_metrics":t=(0,y.jsx)(O,{session:e.session,metrics:n,setActivePage:e.setActivePage})}return(0,y.jsxs)(s.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:[t,(0,y.jsx)(g.default,{title:"Home",onPress:function(){return e.setActivePage("home")}}),(0,y.jsx)(g.default,{title:"Add Metrics",onPress:function(){return e.setActivePage("add_metrics")}}),(0,y.jsx)(g.default,{title:"Delete Metrics",onPress:function(){return e.setActivePage("delete_metrics")}})]})}function F(e){var t=e.session,n=(0,i.useState)(0),o=(0,r.default)(n,2),a=o[0],s=o[1],l=(0,i.useState)("home"),d=(0,r.default)(l,2),f=d[0],p=d[1],h=(0,i.useState)(!1),g=(0,r.default)(h,2),x=g[0],v=g[1],b=(0,i.useState)([]),S=(0,r.default)(b,2),C=S[0],w=S[1];function P(){return(P=(0,c.default)((function*(){try{v(!0);var e=yield u.from("metrics").select("id,name,category").eq("user",t.user.id),n=e.data,r=e.error,o=e.status;if(r&&406!==o)throw r;n&&w(n)}catch(r){r instanceof Error&&j(r.message)}finally{v(!1)}}))).apply(this,arguments)}return(0,i.useEffect)((function(){!function(){P.apply(this,arguments)}()}),[f]),x?(0,y.jsx)(m.default,{children:"Loading..."}):(0,y.jsx)(k,{todayScore:a,updateTodayScore:function(e){s(a+e)},activePage:f,setActivePage:p,metrics:C,session:t})}function H(){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(m.default,{style:{fontSize:20,fontWeight:"bold"},children:["Accountable","\n"]}),(0,y.jsxs)(m.default,{style:{fontSize:14},children:["The actions you take create the person you're becoming.","\n"]})]})}function A(){var e=(0,i.useState)(null),t=(0,r.default)(e,2),n=t[0],a=t[1];return(0,i.useEffect)((function(){u.auth.getSession().then((function(e){var t=e.data.session;a(t)})),u.auth.onAuthStateChange((function(e,t){a(t)}))}),[]),(0,y.jsxs)(s.default,{style:M.container,children:[(0,y.jsx)(H,{}),n&&n.user?(0,y.jsx)(F,{session:n},n.user.id):(0,y.jsx)(p,{}),(0,y.jsx)(o.default,{style:"auto"})]})}var M=a.default.create({container:{padding:30,flex:1,backgroundColor:v.colors.background,alignItems:"center",justifyContent:"center"}})}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,(()=>{var e=[];n.O=(t,r,o,a)=>{if(!r){var s=1/0;for(c=0;c<e.length;c++){for(var[r,o,a]=e[c],i=!0,l=0;l<r.length;l++)(!1&a||s>=a)&&Object.keys(n.O).every((e=>n.O[e](r[l])))?r.splice(l--,1):(i=!1,a<s&&(s=a));if(i){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,o,a]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var i=2&o&&r;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(a,s),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/accountable/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,a,[s,i,l]=r,u=0;if(s.some((t=>0!==e[t]))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(l)var c=l(n)}for(t&&t(r);u<s.length;u++)a=s[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[890],(()=>n(6271)));r=n.O(r)})();
//# sourceMappingURL=main.37de2385.js.map