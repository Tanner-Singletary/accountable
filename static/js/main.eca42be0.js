(()=>{"use strict";var e={2943:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var r=n(885),a=n(3426),i=n(6792),o=n(9385),s=(n(5682),n(5004)),l=n(519),u=(0,n(1218).createClient)("https://bxfruloupumcvynxnqnt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ4ZnJ1bG91cHVtY3Z5bnhucW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTgwMTUyNzIsImV4cCI6MjAxMzU5MTI3Mn0.m6EPHp4wxq7GdWTJjjrdDQaD8uH2oWRWr1Sas4cwq1k",{auth:{storage:l.default,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1}}),c=n(5861),d=n(3624),f=n(5898),p=n(2629);function y(){var e=(0,s.useState)(""),t=(0,r.default)(e,2),n=t[0],a=t[1],i=(0,s.useState)(""),l=(0,r.default)(i,2),y=l[0],m=l[1],g=(0,s.useState)(!1),x=(0,r.default)(g,2),j=x[0],v=x[1];function b(){return(b=(0,c.default)((function*(){v(!0);var e=(yield u.auth.signInWithPassword({email:n,password:y})).error;e&&d.default.alert(e.message),v(!1)}))).apply(this,arguments)}function S(){return(S=(0,c.default)((function*(){v(!0);var e=(yield u.auth.signUp({email:n,password:y})).error;e&&d.default.alert(e.message),v(!1)}))).apply(this,arguments)}return(0,p.jsxs)(o.default,{style:h.container,children:[(0,p.jsx)(o.default,{style:[h.verticallySpaced,h.mt20],children:(0,p.jsx)(f.Input,{label:"Email",leftIcon:{type:"font-awesome",name:"envelope"},onChangeText:function(e){return a(e)},value:n,placeholder:"email@address.com",autoCapitalize:"none"})}),(0,p.jsx)(o.default,{style:h.verticallySpaced,children:(0,p.jsx)(f.Input,{label:"Password",leftIcon:{type:"font-awesome",name:"lock"},onChangeText:function(e){return m(e)},value:y,secureTextEntry:!0,placeholder:"Password",autoCapitalize:"none"})}),(0,p.jsx)(o.default,{style:[h.verticallySpaced,h.mt20],children:(0,p.jsx)(f.Button,{title:"Sign in",disabled:j,onPress:function(){return function(){return b.apply(this,arguments)}()}})}),(0,p.jsx)(o.default,{style:h.verticallySpaced,children:(0,p.jsx)(f.Button,{title:"Sign up",disabled:j,onPress:function(){return function(){return S.apply(this,arguments)}()}})})]})}var h=i.default.create({container:{marginTop:40,padding:12},verticallySpaced:{paddingTop:4,paddingBottom:4,alignSelf:"stretch"},mt20:{marginTop:20}}),m=n(1054),g=n(3693),x=n(3645),j="#EDB9A8",v="#FF5733",b="#BDEDA8",S="#53C623";function C(e){var t=(0,s.useState)(!1),n=(0,r.default)(t,2),a=n[0],i=n[1],l=(0,s.useState)(0),u=(0,r.default)(l,2),c=u[0],d=u[1];return(0,p.jsxs)(o.default,{style:{flex:1,alignItems:"center",justifyContent:"center",margin:10,backgroundColor:a?e.colorHex:e.initialColorHex,borderColor:"black",borderWidth:1},children:[(0,p.jsx)(g.default,{title:e.metric,onPress:function(){return function(){i(!0),d(c+1);var t=e.colorHex===v?-1:1;e.updateTodayScore(t)}()}}),(0,p.jsx)(m.default,{children:c})]})}function P(e){var t=e.colorHex===v?"Don't":"Do";return(0,p.jsxs)(o.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:[(0,p.jsx)(m.default,{style:{fontSize:18,fontWeight:"bold"},children:t}),(0,p.jsx)(x.default,{style:{backgroundColor:e.initialColorHex},data:e.metrics,renderItem:function(t){var n=t.item;return(0,p.jsx)(C,{metric:n.name,initialColorHex:e.initialColorHex,colorHex:e.colorHex,updateTodayScore:e.updateTodayScore})}})]})}function w(e){return(0,p.jsxs)(o.default,{style:{flex:1,marginTop:10,alignItems:"center",justifyContent:"center"},children:[(0,p.jsxs)(m.default,{children:["Today's Score: ",e.todayScore]}),e.metrics.length>0?(0,p.jsxs)(o.default,{style:{flex:1,flexDirection:"row",padding:10,alignItems:"center",justifyContent:"center"},children:[(0,p.jsx)(P,{initialColorHex:b,colorHex:S,metrics:e.metrics.filter((function(e){return"positive"===e.category})),updateTodayScore:e.updateTodayScore}),(0,p.jsx)(P,{initialColorHex:j,colorHex:v,metrics:e.metrics.filter((function(e){return"negative"===e.category})),updateTodayScore:e.updateTodayScore})]}):(0,p.jsx)(m.default,{style:{fontSize:20},children:"Click 'Add Metrics' below to get started! "}),(0,p.jsx)(m.default,{children:"\n"})]})}var I=n(6591);function T(e){var t=e.session,n=(0,s.useState)(!1),a=(0,r.default)(n,2),i=a[0],l=a[1],f=(0,s.useState)("New positive metric"),y=(0,r.default)(f,2),h=y[0],x=y[1],j=(0,s.useState)(""),v=(0,r.default)(j,2),b=v[0],S=v[1],C=(0,s.useState)("New negative metric"),P=(0,r.default)(C,2),w=P[0],T=P[1],_=(0,s.useState)(""),k=(0,r.default)(_,2),A=k[0],H=k[1];function M(e,t){return D.apply(this,arguments)}function D(){return(D=(0,c.default)((function*(e,n){try{console.log("async insertMetric called with:"),console.log({name:e,category:n}),l(!0);var r={user:t.user.id,name:e,category:n},a=(yield u.from("metrics").insert(r)).error;if(a)throw a}catch(a){a instanceof Error&&d.default.alert(a.message)}finally{l(!1)}}))).apply(this,arguments)}return(0,p.jsxs)(o.default,{children:[(0,p.jsx)(I.default,{style:O.input,onChangeText:x,value:h}),(0,p.jsx)(g.default,{title:"Add positive metric",onPress:function(){return function(e){S(e),M(e,"positive")}(h)},disabled:i}),(0,p.jsx)(m.default,{children:b?`added ${b}!`:""}),(0,p.jsx)(m.default,{children:"\n\n"}),(0,p.jsx)(I.default,{style:O.input,onChangeText:T,value:w}),(0,p.jsx)(g.default,{title:"Add negative metric",onPress:function(){return function(e){H(e),M(e,"negative")}(w)},disabled:i}),(0,p.jsx)(m.default,{children:A?`added ${A}!`:""}),(0,p.jsx)(m.default,{children:"\n\n"})]})}var O=i.default.create({input:{height:40,margin:12,borderWidth:1,padding:10}}),_=n(2982),k=n(5087);const A="web"===n(2152).default.OS?function(e,t,n,r){if(window.confirm([e,t].filter(Boolean).join("\n"))){var a=n.find((function(e){return"cancel"!==e.style}));a&&a.onPress()}else{var i=n.find((function(e){return"cancel"===e.style}));i&&i.onPress()}}:d.default.alert;function H(e){var t=(0,s.useState)(e.metrics),n=(0,r.default)(t,2),a=n[0],i=n[1],l=(0,s.useState)(!0),d=(0,r.default)(l,2),f=d[0],y=d[1];function h(){return(h=(0,c.default)((function*(){var t=a.filter((function(e){return!0===e.staged_to_delete})).map((function(e){return e.name}));(yield u.from("metrics").delete().eq("user",e.session.user.id).in("name",t)).error;A("Deletion submitted, return to home page to see remaining metrics."),e.setActivePage("home")}))).apply(this,arguments)}return(0,p.jsxs)(o.default,{style:{flex:1,padding:20,justifyContent:"center",alignItems:"center"},children:[(0,p.jsx)(m.default,{style:{fontSize:18,fontWeight:"bold"},children:"Delete Metrics"}),(0,p.jsx)(m.default,{children:"\n"}),(0,p.jsx)(x.default,{data:a,renderItem:function(e){var t=e.item;return(0,p.jsxs)(o.default,{style:{flex:1,flexDirection:"row",padding:10},children:[(0,p.jsx)(k.default,{trackColor:{false:"#767577",true:"#81b0ff"},thumbColor:t.a?"#f5dd4b":"#f4f3f4",ios_backgroundColor:"#3e3e3e",onValueChange:function(){return function(e){var t=(0,_.default)(a);for(var n of t)n.name===e.name&&(n.staged_to_delete=!n.staged_to_delete);y(t.filter((function(e){return!0===e.staged_to_delete})).length<=0),i(t)}(t)},value:t.staged_to_delete}),(0,p.jsx)(m.default,{style:{padding:10},children:t.name})]})}}),(0,p.jsx)(g.default,{title:"Delete",onPress:function(){return A("Delete all selected?","Press OK to permanently delete metrics.",[{text:"Cancel",onPress:function(){return console.log("Cancel Pressed")},style:"cancel"},{text:"OK",onPress:function(){return function(){return h.apply(this,arguments)}()}}])},disabled:f})]})}function M(e){var t=(0,p.jsx)(p.Fragment,{}),n=e.metrics;switch(n.forEach((function(e){return e.staged_to_delete=!1})),e.activePage){case"home":t=(0,p.jsx)(w,{todayScore:e.todayScore,updateTodayScore:e.updateTodayScore,metrics:e.metrics});break;case"add_metrics":t=(0,p.jsx)(T,{session:e.session});break;case"delete_metrics":t=(0,p.jsx)(H,{session:e.session,metrics:n,setActivePage:e.setActivePage})}return(0,p.jsxs)(o.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:[t,(0,p.jsx)(g.default,{title:"Home",onPress:function(){return e.setActivePage("home")}}),(0,p.jsx)(g.default,{title:"Add Metrics",onPress:function(){return e.setActivePage("add_metrics")}}),(0,p.jsx)(g.default,{title:"Delete Metrics",onPress:function(){return e.setActivePage("delete_metrics")}})]})}function D(e){var t=e.session,n=(0,s.useState)(0),a=(0,r.default)(n,2),i=a[0],o=a[1],l=(0,s.useState)("home"),d=(0,r.default)(l,2),f=d[0],y=d[1],h=(0,s.useState)(!1),g=(0,r.default)(h,2),x=g[0],j=g[1],v=(0,s.useState)([]),b=(0,r.default)(v,2),S=b[0],C=b[1];function P(){return(P=(0,c.default)((function*(){try{j(!0);var e=yield u.from("metrics").select("name,category").eq("user",t.user.id),n=e.data,r=e.error,a=e.status;if(r&&406!==a)throw r;n&&C(n)}catch(r){r instanceof Error&&Alert.alert(r.message)}finally{j(!1)}}))).apply(this,arguments)}return(0,s.useEffect)((function(){!function(){P.apply(this,arguments)}()}),[f]),x?(0,p.jsx)(m.default,{children:"Loading..."}):(0,p.jsx)(M,{todayScore:i,updateTodayScore:function(e){o(i+e)},activePage:f,setActivePage:y,metrics:S,session:t})}function E(){return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(m.default,{style:{fontSize:20,fontWeight:"bold"},children:["Accountable","\n"]}),(0,p.jsxs)(m.default,{style:{fontSize:14},children:["The actions you take create the person you're becoming.","\n"]})]})}function z(){var e=(0,s.useState)(null),t=(0,r.default)(e,2),n=t[0],i=t[1];return(0,s.useEffect)((function(){u.auth.getSession().then((function(e){var t=e.data.session;i(t)})),u.auth.onAuthStateChange((function(e,t){i(t)}))}),[]),(0,p.jsxs)(o.default,{style:F.container,children:[(0,p.jsx)(E,{}),n&&n.user?(0,p.jsx)(D,{session:n},n.user.id):(0,p.jsx)(y,{}),(0,p.jsx)(a.default,{style:"auto"})]})}var F=i.default.create({container:{padding:30,flex:1,backgroundColor:"#F6F6F6",alignItems:"center",justifyContent:"center"}})}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,(()=>{var e=[];n.O=(t,r,a,i)=>{if(!r){var o=1/0;for(c=0;c<e.length;c++){for(var[r,a,i]=e[c],s=!0,l=0;l<r.length;l++)(!1&i||o>=i)&&Object.keys(n.O).every((e=>n.O[e](r[l])))?r.splice(l--,1):(s=!1,i<o&&(o=i));if(s){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[r,a,i]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(i,o),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/accountable/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,i,[o,s,l]=r,u=0;if(o.some((t=>0!==e[t]))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)var c=l(n)}for(t&&t(r);u<o.length;u++)i=o[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[890],(()=>n(6271)));r=n.O(r)})();
//# sourceMappingURL=main.eca42be0.js.map