(()=>{"use strict";var e={8620:(e,t,r)=>{r.r(t),r.d(t,{default:()=>U});var n=r(885),a=r(6792),o=r(9385),i=r(5004),s=r(5705),l=r(3426),c=(r(5682),r(519)),u=(0,r(1218).createClient)("https://bxfruloupumcvynxnqnt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ4ZnJ1bG91cHVtY3Z5bnhucW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTgwMTUyNzIsImV4cCI6MjAxMzU5MTI3Mn0.m6EPHp4wxq7GdWTJjjrdDQaD8uH2oWRWr1Sas4cwq1k",{auth:{storage:c.default,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1}}),d={colors:{background:"#F6F6F6",foreground:"#202121",primary:"#FFFFFFFF",veryGood:"#53C623",good:"#BDEDA8",veryBad:"#FF5733",bad:"#EDB9A8"},spacing:{s:8,m:16,l:24},textVariants:{header:{fontSize:22,fontWeight:"bold"},subHeader:{fontSize:18,fontWeight:"bold"},body:{fontSize:14}}},f=r(5861),g=r(6850),p=r(3624);const h="web"===r(2152).default.OS?function(e,t,r,n){if(window.confirm([e,t].filter(Boolean).join("\n"))){var a=r.find((function(e){return"cancel"!==e.style}));a&&a.onPress()}else{var o=r.find((function(e){return"cancel"===e.style}));o&&o.onPress()}}:p.default.alert;var m=r(2629);function y(){var e=(0,i.useState)(""),t=(0,n.default)(e,2),r=t[0],a=t[1],s=(0,i.useState)(""),l=(0,n.default)(s,2),c=l[0],d=l[1],p=(0,i.useState)(!1),y=(0,n.default)(p,2),j=y[0],b=y[1];function v(){return(v=(0,f.default)((function*(){b(!0);var e=(yield u.auth.signInWithPassword({email:r,password:c})).error;e&&h(e.message),b(!1)}))).apply(this,arguments)}function S(){return(S=(0,f.default)((function*(){b(!0);var e=(yield u.auth.signUp({email:r,password:c})).error;e&&h(e.message),b(!1)}))).apply(this,arguments)}return(0,m.jsxs)(o.default,{style:x.container,children:[(0,m.jsx)(o.default,{style:[x.verticallySpaced,x.mt20],children:(0,m.jsx)(g.Input,{label:"Email",leftIcon:{type:"font-awesome",name:"envelope"},onChangeText:function(e){return a(e)},value:r,placeholder:"email@address.com",autoCapitalize:"none"})}),(0,m.jsx)(o.default,{style:x.verticallySpaced,children:(0,m.jsx)(g.Input,{label:"Password",leftIcon:{type:"font-awesome",name:"lock"},onChangeText:function(e){return d(e)},value:c,secureTextEntry:!0,placeholder:"Password",autoCapitalize:"none"})}),(0,m.jsx)(o.default,{style:[x.verticallySpaced,x.mt20],children:(0,m.jsx)(g.Button,{title:"Sign in",disabled:j,onPress:function(){return function(){return v.apply(this,arguments)}()}})}),(0,m.jsx)(o.default,{style:x.verticallySpaced,children:(0,m.jsx)(g.Button,{title:"Sign up",disabled:j,onPress:function(){return function(){return S.apply(this,arguments)}()}})})]})}var x=a.default.create({container:{marginTop:40,padding:12},verticallySpaced:{paddingTop:4,paddingBottom:4,alignSelf:"stretch"},mt20:{marginTop:20}}),j=r(1054),b=r(5382),v=r(9986),S=r(3645),C=r(4942),w=r(3693);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,C.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=(0,i.useState)(!1),r=(0,n.default)(t,2),a=r[0],s=r[1],l=(0,i.useState)(Boolean(e.metric.todayCount)),c=(0,n.default)(l,2),d=c[0],g=c[1],p=(0,i.useState)(e.metric.todayCount),y=(0,n.default)(p,2),x=y[0],b=y[1],v=(0,i.useState)(e.metric.lifetimeCount),S=(0,n.default)(v,2),C=S[0],O=S[1];function P(){return(P=(0,f.default)((function*(){g(!0),b(x+1),O(C+1);try{s(!0);var t={user_id:e.session.user.id,metric_id:e.metric.id},r=(yield u.from("metric_logs").insert(t)).error;if(r)throw r}catch(r){r instanceof Error&&h(r.message)}finally{s(!1)}}))).apply(this,arguments)}return(0,m.jsxs)(o.default,{style:I(I({},_.container),{},{backgroundColor:d?e.colorHex:e.initialColorHex}),children:[(0,m.jsx)(w.default,{title:e.metric.name,onPress:function(){return function(){return P.apply(this,arguments)}()},disabled:a}),(0,m.jsxs)(j.default,{children:["Lifetime: ",C]}),(0,m.jsxs)(j.default,{children:["Today: ",x]})]})}var _=a.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",margin:d.spacing.s,borderColor:d.colors.foreground,borderWidth:1}});function T(e){var t=e.colorHex===d.colors.veryBad?"Don't":"Do";return(0,m.jsxs)(o.default,{style:H.container,children:[(0,m.jsx)(j.default,{style:d.textVariants.subHeader,children:t}),(0,m.jsx)(S.default,{style:{backgroundColor:e.initialColorHex},data:e.metrics,renderItem:function(t){var r=t.item;return(0,m.jsx)(P,{metric:r,initialColorHex:e.initialColorHex,colorHex:e.colorHex,session:e.session})}})]})}var H=a.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",overflowY:"auto",maxHeight:"100%"}});function D(e){return(0,m.jsxs)(o.default,{style:M.container,children:[e.metrics.length>0?(0,m.jsxs)(o.default,{style:M.buttonPanels,children:[(0,m.jsx)(T,{initialColorHex:d.colors.good,colorHex:d.colors.veryGood,metrics:e.metrics.filter((function(e){return"positive"===e.category})),session:e.session}),(0,m.jsx)(T,{initialColorHex:d.colors.bad,colorHex:d.colors.veryBad,metrics:e.metrics.filter((function(e){return"negative"===e.category})),session:e.session})]}):(0,m.jsx)(j.default,{style:{fontSize:20},children:"Click 'Add' below to get started! "}),(0,m.jsx)(j.default,{children:"\n"})]})}var M=a.default.create({container:{flex:1,marginTop:d.spacing.s,alignItems:"center",justifyContent:"center"},buttonPanels:{flex:1,flexDirection:"row",padding:d.spacing.s,alignItems:"center",justifyContent:"center"}});function k(e){return(0,m.jsxs)(o.default,{style:B.container,children:[(0,m.jsxs)(j.default,{children:["Lifetime Score: ",e.lifetimeScore]}),(0,m.jsxs)(j.default,{children:["Today's Score: ",e.todayScore]}),(0,m.jsxs)(j.default,{children:["\n\n","Click to refresh scores"]}),(0,m.jsxs)(j.default,{children:["(returns you to home page)","\n\n"]}),(0,m.jsx)(w.default,{title:"Refresh",onPress:function(){return e.triggerMetricCallToggle()}})]})}var B=a.default.create({container:{flex:1,padding:d.spacing.l,alignItems:"center",justifyContent:"center"}}),z=r(6591);function E(e){var t=e.session,r=e.triggerMetricCallToggle,a=(0,i.useState)(!1),s=(0,n.default)(a,2),l=s[0],c=s[1],d=(0,i.useState)(""),g=(0,n.default)(d,2),p=g[0],y=g[1],x=(0,i.useState)(""),b=(0,n.default)(x,2),v=b[0],S=b[1],C=(0,i.useState)(""),O=(0,n.default)(C,2),I=O[0],P=O[1],_=(0,i.useState)(""),T=(0,n.default)(_,2),H=T[0],D=T[1];function M(e,t){return k.apply(this,arguments)}function k(){return(k=(0,f.default)((function*(e,n){try{c(!0);var a={user:t.user.id,name:e,category:n},o=(yield u.from("metrics").insert(a)).error;if(o)throw o}catch(o){o instanceof Error&&h(o.message)}finally{c(!1),r()}}))).apply(this,arguments)}return(0,m.jsxs)(o.default,{style:F.container,children:[(0,m.jsx)(z.default,{style:F.positiveInput,onChangeText:y,value:p}),(0,m.jsx)(w.default,{title:"Add new thing to do",onPress:function(){return function(e){S(e),M(e,"positive")}(p)},disabled:l}),(0,m.jsx)(j.default,{children:v?`added ${v}!`:""}),(0,m.jsx)(j.default,{children:"\n\n"}),(0,m.jsx)(z.default,{style:F.negativeInput,onChangeText:P,value:I}),(0,m.jsx)(w.default,{title:"Add new thing to avoid",onPress:function(){return function(e){D(e),M(e,"negative")}(I)},disabled:l}),(0,m.jsx)(j.default,{children:H?`added ${H}!`:""}),(0,m.jsx)(j.default,{children:"\n\n"})]})}var F=a.default.create({container:{flex:1,padding:d.spacing.m,justifyContent:"center",alignItems:"center"},positiveInput:{height:40,margin:12,borderWidth:1,padding:d.spacing.s,backgroundColor:d.colors.good},negativeInput:{height:40,margin:12,borderWidth:1,padding:d.spacing.s,backgroundColor:d.colors.bad}}),L=r(2982),A=r(5087);function W(e){var t=(0,i.useState)(e.metrics),r=(0,n.default)(t,2),a=r[0],s=r[1],l=(0,i.useState)(!0),c=(0,n.default)(l,2),g=c[0],p=c[1];function y(){return(y=(0,f.default)((function*(){var t=a.filter((function(e){return!0===e.staged_to_delete})).map((function(e){return e.name}));(yield u.from("metrics").delete().eq("user",e.session.user.id).in("name",t)).error;e.triggerMetricCallToggle(),h("Deletion submitted, return to home page to see remaining metrics.")}))).apply(this,arguments)}return(0,m.jsxs)(o.default,{style:J.container,children:[(0,m.jsx)(j.default,{style:d.textVariants.subHeader,children:"Delete Metrics"}),(0,m.jsx)(j.default,{children:"\n"}),(0,m.jsx)(S.default,{data:a,renderItem:function(e){var t=e.item;return(0,m.jsxs)(o.default,{style:J.switch,children:[(0,m.jsx)(A.default,{trackColor:{false:"#767577",true:"#81b0ff"},thumbColor:t.a?"#f5dd4b":"#f4f3f4",ios_backgroundColor:"#3e3e3e",onValueChange:function(){return function(e){var t=(0,L.default)(a);for(var r of t)r.name===e.name&&(r.staged_to_delete=!r.staged_to_delete);p(t.filter((function(e){return!0===e.staged_to_delete})).length<=0),s(t)}(t)},value:t.staged_to_delete}),(0,m.jsx)(j.default,{style:J.switchLabel,children:t.name})]})}}),(0,m.jsx)(w.default,{title:"Delete",onPress:function(){return h("Delete all selected?","Press OK to permanently delete metrics.",[{text:"Cancel",onPress:function(){return console.log("Cancel Pressed")},style:"cancel"},{text:"OK",onPress:function(){return function(){return y.apply(this,arguments)}()}}])},disabled:g})]})}var J=a.default.create({container:{flex:1,padding:d.spacing.m,justifyContent:"center",alignItems:"center"},switch:{flex:1,flexDirection:"row",padding:d.spacing.s},switchLabel:{padding:d.spacing.s}}),V=(0,b.default)();function q(e){return e.metrics.forEach((function(t){t.staged_to_delete=!1,t.lifetimeCount=e.metricLogs.filter((function(e){return e.metric_id===t.id})).length,t.todayCount=e.todayLogs.filter((function(e){return e.metric_id===t.id})).length})),(0,m.jsx)(o.default,{style:G.container,children:(0,m.jsxs)(V.Navigator,{initialRouteName:"HomePage",screenOptions:{tabBarActiveTintColor:"#e91e63"},children:[(0,m.jsx)(V.Screen,{name:"Home",component:function(){return(0,m.jsx)(D,{metrics:e.metrics,session:e.session,triggerMetricCallToggle:e.triggerMetricCallToggle})},options:{tabBarLabel:"Home",tabBarIcon:function(e){var t=e.color,r=e.size;return(0,m.jsx)(v.default,{name:"home",color:t,size:r})}}}),(0,m.jsx)(V.Screen,{name:"Profile",component:function(){return(0,m.jsx)(k,{lifetimeScore:e.lifetimeScore,todayScore:e.todayScore,triggerMetricCallToggle:e.triggerMetricCallToggle})},options:{tabBarLabel:"Profile",tabBarIcon:function(e){var t=e.color,r=e.size;return(0,m.jsx)(v.default,{name:"head-flash-outline",color:t,size:r})}}}),(0,m.jsx)(V.Screen,{name:"Add",component:function(){return(0,m.jsx)(E,{session:e.session,triggerMetricCallToggle:e.triggerMetricCallToggle})},options:{tabBarLabel:"Add",tabBarIcon:function(e){var t=e.color,r=e.size;return(0,m.jsx)(v.default,{name:"plus",color:t,size:r})}}}),(0,m.jsx)(V.Screen,{name:"Delete",component:function(){return(0,m.jsx)(W,{session:e.session,metrics:e.metrics,triggerMetricCallToggle:e.triggerMetricCallToggle})},options:{tabBarLabel:"Delete",tabBarIcon:function(e){var t=e.color,r=e.size;return(0,m.jsx)(v.default,{name:"trash-can-outline",color:t,size:r})}}})]})})}var G=a.default.create({container:{flex:1,minWidth:"100vw",justifyContent:"center"}});function N(e){var t=e.session,r=(0,i.useState)(0),a=(0,n.default)(r,2),o=a[0],s=a[1],l=(0,i.useState)(0),c=(0,n.default)(l,2),d=c[0],g=c[1],p=(0,i.useState)(!1),y=(0,n.default)(p,2),x=y[0],b=y[1],v=(0,i.useState)(!0),S=(0,n.default)(v,2),C=S[0],w=S[1],O=(0,i.useState)(!0),I=(0,n.default)(O,2),P=I[0],_=I[1],T=(0,i.useState)([]),H=(0,n.default)(T,2),D=H[0],M=H[1],k=(0,i.useState)([]),B=(0,n.default)(k,2),z=B[0],E=B[1],F=(0,i.useState)([]),L=(0,n.default)(F,2),A=L[0],W=L[1];function J(){return(J=(0,f.default)((function*(){try{w(!0);var e=yield u.from("metrics").select("id,name,category").eq("user",t.user.id),r=e.data,n=e.error,a=e.status;if(n&&406!==a)throw n;r&&M(r)}catch(n){n instanceof Error&&h(n.message)}finally{w(!1)}}))).apply(this,arguments)}function V(){return(V=(0,f.default)((function*(){var e=new Date;e.setHours(0,0,0,0);var r=new Date;r.setHours(23,59,59,999);try{_(!0);var n=yield u.from("metric_logs").select("id,created_at,user_id,metric_id").eq("user_id",t.user.id),a=n.data,o=n.error,i=n.status;if(o&&406!==i)throw o;if(a){E(a),g(a.length);var l=a.filter((function(t){return new Date(t.created_at)>=e&&new Date(t.created_at)<=r}));W(l),s(l.length)}}catch(o){o instanceof Error&&h(o.message)}finally{_(!1)}}))).apply(this,arguments)}return(0,i.useEffect)((function(){!function(){J.apply(this,arguments)}(),function(){V.apply(this,arguments)}()}),[x]),C||P?(0,m.jsx)(j.default,{children:"Loading..."}):(0,m.jsx)(q,{lifetimeScore:d,todayScore:o,triggerMetricCallToggle:function(){b(!x)},metrics:D,metricLogs:z,todayLogs:A,session:t})}function R(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(j.default,{style:d.textVariants.header,children:["Accountable","\n"]}),(0,m.jsxs)(j.default,{style:d.textVariants.body,children:["The actions you take create the person you're becoming.","\n"]})]})}function U(){var e=(0,i.useState)(null),t=(0,n.default)(e,2),r=t[0],a=t[1];return(0,i.useEffect)((function(){u.auth.getSession().then((function(e){var t=e.data.session;a(t)})),u.auth.onAuthStateChange((function(e,t){a(t)}))}),[]),(0,m.jsx)(o.default,{style:Z.container,children:(0,m.jsxs)(s.default,{children:[(0,m.jsx)(R,{}),(0,m.jsx)(l.default,{style:"auto"}),(0,m.jsx)(o.default,{style:Z.body,children:r&&r.user?(0,m.jsx)(N,{session:r},r.user.id):(0,m.jsx)(y,{})})]})})}var Z=a.default.create({container:{padding:d.spacing.l,flex:1,backgroundColor:d.colors.background,alignItems:"center",justifyContent:"space-between",maxHeight:"100vh"},body:{flex:6,alignItems:"center",justifyContent:"center"}})}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=e,(()=>{var e=[];r.O=(t,n,a,o)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,a,o]=e[u],s=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(s=!1,o<i&&(i=o));if(s){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,a,o]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var o=Object.create(null);r.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,r.d(o,i),o}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.p="/accountable/",(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,o,[i,s,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(l)var u=l(r)}for(t&&t(n);c<i.length;c++)o=i[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r.O(void 0,[125],(()=>r(6271)));n=r.O(n)})();
//# sourceMappingURL=main.38be369d.js.map