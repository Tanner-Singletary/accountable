(()=>{"use strict";var e={1692:(e,t,r)=>{r.r(t),r.d(t,{default:()=>E});var n=r(885),a=r(3426),o=r(6792),i=r(9385),s=(r(5682),r(5004)),l=r(519),u=(0,r(1218).createClient)("https://bxfruloupumcvynxnqnt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ4ZnJ1bG91cHVtY3Z5bnhucW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTgwMTUyNzIsImV4cCI6MjAxMzU5MTI3Mn0.m6EPHp4wxq7GdWTJjjrdDQaD8uH2oWRWr1Sas4cwq1k",{auth:{storage:l.default,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1}}),c=r(5861),d=r(3624),f=r(9954),p=r(2629);function h(){var e=(0,s.useState)(""),t=(0,n.default)(e,2),r=t[0],a=t[1],o=(0,s.useState)(""),l=(0,n.default)(o,2),h=l[0],g=l[1],v=(0,s.useState)(!1),x=(0,n.default)(v,2),m=x[0],j=x[1];function S(){return(S=(0,c.default)((function*(){j(!0);var e=(yield u.auth.signInWithPassword({email:r,password:h})).error;e&&d.default.alert(e.message),j(!1)}))).apply(this,arguments)}function b(){return(b=(0,c.default)((function*(){j(!0);var e=(yield u.auth.signUp({email:r,password:h})).error;e&&d.default.alert(e.message),j(!1)}))).apply(this,arguments)}return(0,p.jsxs)(i.default,{style:y.container,children:[(0,p.jsx)(i.default,{style:[y.verticallySpaced,y.mt20],children:(0,p.jsx)(f.Input,{label:"Email",leftIcon:{type:"font-awesome",name:"envelope"},onChangeText:function(e){return a(e)},value:r,placeholder:"email@address.com",autoCapitalize:"none"})}),(0,p.jsx)(i.default,{style:y.verticallySpaced,children:(0,p.jsx)(f.Input,{label:"Password",leftIcon:{type:"font-awesome",name:"lock"},onChangeText:function(e){return g(e)},value:h,secureTextEntry:!0,placeholder:"Password",autoCapitalize:"none"})}),(0,p.jsx)(i.default,{style:[y.verticallySpaced,y.mt20],children:(0,p.jsx)(f.Button,{title:"Sign in",disabled:m,onPress:function(){return function(){return S.apply(this,arguments)}()}})}),(0,p.jsx)(i.default,{style:y.verticallySpaced,children:(0,p.jsx)(f.Button,{title:"Sign up",disabled:m,onPress:function(){return function(){return b.apply(this,arguments)}()}})})]})}var y=o.default.create({container:{marginTop:40,padding:12},verticallySpaced:{paddingTop:4,paddingBottom:4,alignSelf:"stretch"},mt20:{marginTop:20}}),g=r(1054),v=r(3693),x=r(3645),m="#202121",j="#EDB9A8",S="#FF5733",b="#BDEDA8",w="#53C623";function T(e){var t=(0,s.useState)(!1),r=(0,n.default)(t,2),a=r[0],o=r[1],l=(0,s.useState)(0),u=(0,n.default)(l,2),c=u[0],d=u[1];return(0,p.jsxs)(i.default,{style:{backgroundColor:a?e.colorHex:e.initialColorHex},children:[(0,p.jsx)(v.default,{title:e.metric,onPress:function(){return function(){o(!0),d(c+1);var t=e.colorHex===S?-1:1;e.updateTodayScore(t)}()}}),(0,p.jsx)(g.default,{children:c})]})}function A(e){var t=e.colorHex===S?"Don't":"Do";return(0,p.jsxs)(i.default,{children:[(0,p.jsx)(g.default,{style:{fontSize:18,fontWeight:"bold"},children:t}),(0,p.jsx)(x.default,{style:{backgroundColor:e.initialColorHex},data:e.metricsArr,renderItem:function(t){var r=t.item;return(0,p.jsx)(T,{metric:r.metric,initialColorHex:e.initialColorHex,colorHex:e.colorHex,updateTodayScore:e.updateTodayScore})}})]})}function C(e){var t=e.positiveMetricsArr.length+e.negativeMetricsArr.length;return(0,p.jsxs)(i.default,{style:{flex:5,alignItems:"center"},children:[(0,p.jsxs)(g.default,{children:["Today's Score: ",e.todayScore]}),(0,p.jsx)(g.default,{children:"\n"}),t>0?(0,p.jsxs)(i.default,{style:{flexDirection:"row"},children:[(0,p.jsx)(A,{initialColorHex:b,colorHex:w,metricsArr:e.positiveMetricsArr,updateTodayScore:e.updateTodayScore}),(0,p.jsx)(A,{initialColorHex:j,colorHex:S,metricsArr:e.negativeMetricsArr,updateTodayScore:e.updateTodayScore})]}):(0,p.jsx)(g.default,{style:{fontSize:20},children:"Click 'Add Metrics' below to get started! "}),(0,p.jsx)(g.default,{children:"\n"}),(0,p.jsx)(g.default,{children:"\n"}),(0,p.jsx)(g.default,{children:"\n"})]})}var I=r(6591);function O(e){var t=e.session,r=(0,s.useState)(!1),a=(0,n.default)(r,2),o=a[0],l=a[1],f=(0,s.useState)("New positive metric"),h=(0,n.default)(f,2),y=h[0],x=h[1],m=(0,s.useState)(""),j=(0,n.default)(m,2),S=j[0],b=j[1],w=(0,s.useState)("New negative metric"),T=(0,n.default)(w,2),A=T[0],C=T[1],O=(0,s.useState)(""),P=(0,n.default)(O,2),F=P[0],H=P[1];function k(e,t){return E.apply(this,arguments)}function E(){return(E=(0,c.default)((function*(e,r){try{console.log("async insertMetric called with:"),console.log({name:e,category:r}),l(!0);var n={user:t.user.id,name:e,category:r},a=(yield u.from("metrics").insert(n)).error;if(a)throw a}catch(a){a instanceof Error&&d.default.alert(a.message)}finally{l(!1)}}))).apply(this,arguments)}return(0,p.jsxs)(i.default,{children:[(0,p.jsx)(I.default,{style:M.input,onChangeText:x,value:y}),(0,p.jsx)(v.default,{title:"Add positive metric",onPress:function(){return function(e){b(e),k(e,"positive")}(y)},disabled:o}),(0,p.jsx)(g.default,{children:S?`added ${S}!`:""}),(0,p.jsx)(g.default,{children:"\n\n"}),(0,p.jsx)(I.default,{style:M.input,onChangeText:C,value:A}),(0,p.jsx)(v.default,{title:"Add negative metric",onPress:function(){return function(e){H(e),k(e,"negative")}(A)},disabled:o}),(0,p.jsx)(g.default,{children:F?`added ${F}!`:""}),(0,p.jsx)(g.default,{children:"\n\n"})]})}var M=o.default.create({input:{height:40,margin:12,borderWidth:1,padding:10}});function P(e){var t=(0,p.jsx)(p.Fragment,{});switch(e.activePage){case"home":t=(0,p.jsx)(C,{todayScore:e.todayScore,updateTodayScore:e.updateTodayScore,positiveMetricsArr:e.positiveMetricsArr,negativeMetricsArr:e.negativeMetricsArr});break;case"add_metrics":t=(0,p.jsx)(O,{session:e.session})}return(0,p.jsxs)(i.default,{style:{flex:5,alignItems:"center"},children:[t,(0,p.jsx)(v.default,{title:"Home",onPress:function(){return e.setActivePage("home")}}),(0,p.jsx)(v.default,{title:"Add Metrics",onPress:function(){return e.setActivePage("add_metrics")}})]})}function F(e){var t=e.session,r=(0,s.useState)(0),a=(0,n.default)(r,2),o=a[0],i=a[1],l=(0,s.useState)("home"),d=(0,n.default)(l,2),f=d[0],h=d[1],y=(0,s.useState)(!1),v=(0,n.default)(y,2),x=v[0],m=v[1],j=(0,s.useState)([]),S=(0,n.default)(j,2),b=S[0],w=S[1],T=(0,s.useState)([]),A=(0,n.default)(T,2),C=A[0],I=A[1];function O(){return(O=(0,c.default)((function*(){try{m(!0);var e=yield u.from("metrics").select("name,category").eq("user",t.user.id),r=e.data,n=e.error,a=e.status;if(n&&406!==a)throw n;if(r){var o=[],i=[];for(var s of(console.log("data returned:"),r))"positive"===s.category?o.push({metric:s.name}):"negative"===s.category?i.push({metric:s.name}):console.log(`row.category was not positive or negative, it was: ${s.category}`),console.log(s);w(o),I(i)}}catch(n){n instanceof Error&&Alert.alert(n.message)}finally{m(!1)}}))).apply(this,arguments)}return(0,s.useEffect)((function(){!function(){O.apply(this,arguments)}()}),[f]),x?(0,p.jsx)(g.default,{children:"Loading..."}):(0,p.jsx)(P,{todayScore:o,updateTodayScore:function(e){i(o+e)},activePage:f,setActivePage:h,positiveMetricsArr:b,negativeMetricsArr:C,session:t})}var H=o.default.create({title:{fontSize:20,fontWeight:"bold"},text:{color:m},input:{height:40,borderWidth:1,padding:10,color:m,backgroundColor:"#FFFFFFFF",borderBottomColor:"#E6EAEA",borderBottomWidth:1},warning:{color:"red"},success:{color:"green"}});function k(){return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(g.default,{style:H.title,children:["Accountable","\n","\n"]}),(0,p.jsxs)(g.default,{style:{fontSize:18},children:["The actions you take create the person you're becoming.","\n","\n"]})]})}function E(){var e=(0,s.useState)(null),t=(0,n.default)(e,2),r=t[0],o=t[1];return(0,s.useEffect)((function(){u.auth.getSession().then((function(e){var t=e.data.session;o(t)})),u.auth.onAuthStateChange((function(e,t){o(t)}))}),[]),(0,p.jsxs)(i.default,{style:_.container,children:[(0,p.jsx)(k,{}),r&&r.user?(0,p.jsx)(F,{session:r},r.user.id):(0,p.jsx)(h,{}),(0,p.jsx)(a.default,{style:"auto"})]})}var _=o.default.create({container:{padding:30,flex:1,backgroundColor:"#F6F6F6",alignItems:"center",justifyContent:"center"}})}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=e,(()=>{var e=[];r.O=(t,n,a,o)=>{if(!n){var i=1/0;for(c=0;c<e.length;c++){for(var[n,a,o]=e[c],s=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(s=!1,o<i&&(i=o));if(s){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,a,o]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var o=Object.create(null);r.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,r.d(o,i),o}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.p="/accountable/",(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,o,[i,s,l]=n,u=0;if(i.some((t=>0!==e[t]))){for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(l)var c=l(r)}for(t&&t(n);u<i.length;u++)o=i[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(c)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r.O(void 0,[751],(()=>r(6271)));n=r.O(n)})();
//# sourceMappingURL=main.291cc682.js.map